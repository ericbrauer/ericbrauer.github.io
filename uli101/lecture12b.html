<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lecture 12B: Some More Bash Script Examples</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../css/eric.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Lecture 12B: Some More Bash Script Examples</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#example-1-say-hi-to-version-2.0">Example 1: <em>Say Hi To</em> version 2.0</a></li>
<li><a href="#example-how-much-reading-have-you-done">Example: How Much Reading Have You Done?</a></li>
</ul>
</nav>
<h1 id="example-1-say-hi-to-version-2.0">Example 1: <em>Say Hi To</em> version 2.0</h1>
<p>Consider this example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># This is a test script! :)</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$#</span><span class="st">&quot;</span> <span class="ot">-lt</span> 2<span class="bu"> ]</span> <span class="co"># If the number of arguments is less than two...</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">then</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st">!&quot;</span> <span class="co"># Say hi to one person. Otherwise...</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">else</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st"> and </span><span class="va">$2</span><span class="st">!&quot;</span> <span class="co"># Say hi to two people.</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="bu">echo</span> <span class="st">&quot;Number of arguments: </span><span class="va">$#</span><span class="st">&quot;</span> <span class="co"># print the number of names that were given.</span></a></code></pre></div>
<p>This script has a lot of limitations. If you give more than two names, it will say hello to the first two and ignore the rest. It also doesn’t handle a case where the user gives <em>zero</em> arguments. We can improve this script by using a better <em>if.. elif.. else</em> format.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">if</span><span class="bu"> [</span> condition<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">then</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="ex">action</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">elif</span><span class="bu"> [</span> second condition<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">then</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="ex">second</span> action</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">else</span></a>
<a class="sourceLine" id="cb2-8" title="8">    <span class="ex">default</span> action</a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw">fi</span></a></code></pre></div>
<p>In this next example, we don’t need to think about numerical comparisons such as <em>less than</em> <code>-lt</code> or <em>greater than</em> <code>-gt</code>. We can treat the value of <code>$#</code> like a string. So let’s specify a condition for <em>zero</em> arguments, a condition for <em>one</em> argument, and a default case for everything else:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"># Always comment your code.</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">==</span> 0<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">then</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="bu">echo</span> Usage: please include at least one person to greet. <span class="op">1&gt;&amp;2</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">elif</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">==</span> 1<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="kw">then</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st">!&quot;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="kw">else</span></a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="bu">echo</span> <span class="st">&quot;Wow, there are a lot of people in here...&quot;</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="bu">exit</span> 0</a></code></pre></div>
<p>So one thing to note about our exit codes: in the first condition we specify an exit code of 1. Once we hit an exit, the program is finished. If there are no arguments, we take the first set of actions and never get to the bottom of the script. We never encounter <code>exit 0</code>. However, if either one argument or many arguments are encountered, we <em>do</em> reach <code>exit 0</code>. This is good: <em>0</em> means everything was working properly. <em>1</em> means there was an error. We consider the script to be running normally if one or more names have been entered.</p>
<p>The next thing to think about is how to deal with the case where we have many names? How can we handle this case in a way that looks nice? Well, let’s try a loop. We want to deal with each name in the arguments list <code>$*</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">for</span> <span class="ex">variable</span> in list</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">do</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="ex">repeated</span> actions</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw">done</span></a></code></pre></div>
<p>So now our script might look like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co"># say hi to version 2</span></a>
<a class="sourceLine" id="cb5-4" title="4"></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">==</span> 0<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="kw">then</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="bu">echo</span> Usage: please include at least one person to greet. <span class="op">1&gt;&amp;2</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb5-9" title="9"><span class="kw">elif</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">==</span> 1<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="kw">then</span></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st">!&quot;</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="kw">else</span></a>
<a class="sourceLine" id="cb5-13" title="13">    <span class="kw">for</span> <span class="ex">name</span> in <span class="va">$*</span></a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb5-15" title="15">        <span class="bu">echo</span> <span class="va">$name</span></a>
<a class="sourceLine" id="cb5-16" title="16">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="bu">exit</span> 0</a></code></pre></div>
<p>Please note that you can also use <code>$@</code> and you get roughly the same output. For the scope of this course, we can say that both <code>$*</code> and <code>$@</code> will return all arguments as an <em>array</em>. Please note though that <a href="https://unix.stackexchange.com/questions/129072/whats-the-difference-between-and">there are some differences between the two</a>.</p>
<p>This script now handles 0 arguments by complaining to the user, it handles 1 argument by saying “Hello User!” and it handles 2 or more arguments by simply listing those names, each on a new line:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="ex">Eric</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="ex">Sarah</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="ex">Yoko</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="ex">Nate</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="ex">Paul</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="ex">...</span></a></code></pre></div>
<p>This isn’t what we want. We want our script to respond to us by saying hello in a way that is somewhat closer to real communication.</p>
<p>First, let’s make it so that before we enter the loop, we say Hello, and using <code>-n</code> to suppress the newline…</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1">    <span class="bu">echo</span> -n <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st">&quot;</span></a></code></pre></div>
<p>…then inside our loop we insert “and” and a name…</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1">    <span class="bu">echo</span> -n <span class="st">&quot; and </span><span class="va">$name</span><span class="st">&quot;</span></a></code></pre></div>
<p>…and after iterating through each name in our argument list, we finish with an “!” to make it match up with our output before. This time, we <em>do</em> want to finish with a newline, because this is the end of our script.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="bu">echo</span> <span class="st">&#39;!&#39;</span> <span class="co"># Notice the single quotes here!</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co"># We don&#39;t want this ! to be interpreted as anything other than punctuation.</span></a></code></pre></div>
<p>(If you don’t understand why we want a newline, go ahead and try this script with a <code>-n</code> flag and see how it looks!)</p>
<p>There’s one last piece of the puzzle: If I run this script with arguments like this:</p>
<p><code>./say-hi-to2 Eric Sarah Yoko Nate Paul</code></p>
<p>…My output looks like this:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="ex">Hello</span> Eric and Eric and Sarah and Yoko and Nate and Paul!</a></code></pre></div>
<p>…So we can conclude that the value of <code>$1</code> and the <em>first</em> value of <code>$*</code> are the same. What we want to do is discard the first value of our argument list and to <em>shift</em> all of our arguments up one:</p>
<p><strong>Before Shift:</strong></p>
<table>
<thead>
<tr class="header">
<th>$1</th>
<th>$2</th>
<th>$3</th>
<th>$4</th>
<th>$5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Eric</td>
<td>Sarah</td>
<td>Yoko</td>
<td>Nate</td>
<td>Paul</td>
</tr>
</tbody>
</table>
<p><strong>After Shift:</strong></p>
<table>
<thead>
<tr class="header">
<th>$1</th>
<th>$2</th>
<th>$3</th>
<th>$4</th>
<th>$5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sarah</td>
<td>Yoko</td>
<td>Nate</td>
<td>Paul</td>
<td>–</td>
</tr>
</tbody>
</table>
<p>Conveniently enough, the name of this command is <code>shift</code>. We will call it after saying “Hello”:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co"># say hi to version 2</span></a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">==</span> 0<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="kw">then</span></a>
<a class="sourceLine" id="cb11-7" title="7">    <span class="bu">echo</span> Usage: please include at least one person to greet. <span class="op">1&gt;&amp;2</span></a>
<a class="sourceLine" id="cb11-8" title="8">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb11-9" title="9"><span class="kw">elif</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">==</span> 1<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="kw">then</span></a>
<a class="sourceLine" id="cb11-11" title="11">    <span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st">!&quot;</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="kw">else</span></a>
<a class="sourceLine" id="cb11-13" title="13">    <span class="bu">echo</span> -n <span class="st">&quot;Hello </span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb11-14" title="14">    <span class="bu">shift</span> <span class="co"># discard the value $1, and shift all arguments up</span></a>
<a class="sourceLine" id="cb11-15" title="15">    <span class="kw">for</span> <span class="ex">name</span> in <span class="va">$*</span></a>
<a class="sourceLine" id="cb11-16" title="16">    <span class="kw">do</span></a>
<a class="sourceLine" id="cb11-17" title="17">        <span class="bu">echo</span> -n <span class="st">&quot; and </span><span class="va">$name</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb11-18" title="18">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb11-19" title="19">    <span class="bu">echo</span> <span class="st">&#39;!&#39;</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb11-21" title="21"><span class="bu">exit</span> 0</a></code></pre></div>
<p><em>Bonus:</em> If you are looking for practice, I challenge you to create <em>say-hi-to3</em>. Instead of separating names with the word ‘and’, separate them with commas, until you reach the last name, which should have an ‘and’ preceding it.</p>
<p><code>./say-hi-to3 Eric Sarah Yoko Nate</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="ex">Hello</span> Eric, Sarah, Yoko and Nate!</a></code></pre></div>
<hr />
<h1 id="example-how-much-reading-have-you-done">Example: How Much Reading Have You Done?</h1>
<p>Here’s another example that will output the average words per lecture for each of our twelve weeks.</p>
<p>Start with a shebang and comment:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co"># return statistics about the lecture notes: total words and average words per lecture.</span></a></code></pre></div>
<p>To solve this problem, you’d need to know something about how I have named my files. I have been using Markdown to create lecture notes. Here’s how it looks on my computer:</p>
<p><code>ls /home/eric.brauer/uli101/LECTURE_NOTES | grep 'lecture[0-9][0-9ab]*.md'</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="ex">lecture10.md</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="ex">lecture11a.md</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="ex">lecture11b.md</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="ex">lecture11.md</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="ex">lecture12.md</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="ex">lecture2a.md</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="ex">lecture2b.md</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="ex">lecture3a.md</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="ex">lecture3b.md</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="ex">lecture4a.md</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="ex">lecture4b.md</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="ex">lecture5a.md</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="ex">lecture5b.md</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="ex">lecture6.md</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="ex">lecture7.md</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="ex">lecture8.md</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="ex">lecture9.md</span></a></code></pre></div>
<p>So we have one tool which will return number of words in a file, if you’ll remember: <code>wc</code> with the <code>-w</code> option. We will need to run that command for each file.</p>
<p><code>wc -w lecture10.md</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1"><span class="ex">2245</span> lecture10.md</a></code></pre></div>
<p>We also need to parse this result. We will want to sum these numbers, so we need to strip the filename from the result. Let’s use <code>awk</code> to do this. We can then store this in a variable.</p>
<p><code>sum=$(wc -w lecture10.md | awk '{print $1}')</code></p>
<p><code>echo $sum</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1"><span class="ex">2245</span></a></code></pre></div>
<p>Here is our script so far…</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb17-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co"># return statistics about the lecture notes: total words and average words per lecture.</span></a>
<a class="sourceLine" id="cb17-4" title="4"></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="va">sum=</span>0</a>
<a class="sourceLine" id="cb17-6" title="6"><span class="va">count=</span>0</a>
<a class="sourceLine" id="cb17-7" title="7"></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="kw">for</span> <span class="fu">file</span> in <span class="va">$(</span><span class="fu">ls</span> /home/eric.brauer/uli101/LECTURE_NOTES <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;lecture[0-9][0-9ab]*.md&#39;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="kw">do</span></a>
<a class="sourceLine" id="cb17-10" title="10">    <span class="va">sum=$((</span> <span class="va">$(</span><span class="fu">wc</span> -w <span class="va">$files</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span><span class="va">)</span> + <span class="va">$sum</span> <span class="va">))</span></a>
<a class="sourceLine" id="cb17-11" title="11">    <span class="va">count=$((</span> <span class="va">$count</span> + 1 <span class="va">))</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="kw">done</span></a></code></pre></div>
<p>Finally, we do some basic error checking and output the results. The final product:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co"># return statistics about the lecture notes: total words and average words per lecture.</span></a>
<a class="sourceLine" id="cb18-4" title="4"></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="va">sum=</span>0</a>
<a class="sourceLine" id="cb18-6" title="6"><span class="va">count=</span>0</a>
<a class="sourceLine" id="cb18-7" title="7"></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="kw">for</span> <span class="fu">file</span> in <span class="va">$(</span><span class="fu">ls</span> /home/eric.brauer/uli101/LECTURE_NOTES <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;lecture[0-9][0-9ab]*.md&#39;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="kw">do</span></a>
<a class="sourceLine" id="cb18-10" title="10">    <span class="va">sum=$((</span> <span class="va">$(</span><span class="fu">wc</span> -w <span class="va">$files</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span><span class="va">)</span> + <span class="va">$sum</span> <span class="va">))</span></a>
<a class="sourceLine" id="cb18-11" title="11">    <span class="va">count=$((</span> <span class="va">$count</span> + 1 <span class="va">))</span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="kw">done</span></a>
<a class="sourceLine" id="cb18-13" title="13"></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="bu">echo</span> <span class="st">&quot;Total words: </span><span class="va">$sum</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb18-15" title="15"></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$count</span> <span class="ot">-gt</span> 0<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb18-17" title="17"><span class="kw">then</span></a>
<a class="sourceLine" id="cb18-18" title="18">    <span class="bu">echo</span> <span class="st">&quot;Average length of a lecture: </span><span class="va">$((</span> <span class="va">$sum</span> / <span class="va">$count</span> <span class="va">))</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb18-19" title="19"><span class="kw">fi</span></a></code></pre></div>
<p>And here is the result of the script…</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" title="1"><span class="ex">Total</span> words: 29123</a>
<a class="sourceLine" id="cb19-2" title="2"><span class="ex">Average</span> length of a lecture: 1456</a></code></pre></div>
<p>That’s a lot of words! I hope it’s been worth it… :smile: That’s all folks!</p>
</body>
</html>
