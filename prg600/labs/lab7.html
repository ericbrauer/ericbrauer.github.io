<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>lab7</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://ict.senecacollege.ca/~eric.brauer/prg600/eric.css" />
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#lab-7-dictionaries-and-csv-files-f-strings">Lab 7: Dictionaries and CSV Files, F-Strings</a>
<ul>
<li><a href="#learning-outcomes">Learning Outcomes</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#dictionaries">7.1 Dictionaries</a>
<ul>
<li><a href="#task-understanding-the-limitations-of-lists">TASK: Understanding the Limitations of Lists</a></li>
<li><a href="#using-dictionaries-to-solve-the-problem-with-lists">Using Dictionaries To Solve The Problem With Lists</a></li>
<li><a href="#task-modify-lab7a">TASK: Modify <code>lab7a</code></a></li>
</ul></li>
<li><a href="#modifying-dictionaries">7.2 Modifying Dictionaries</a></li>
<li><a href="#task-print-a-menu">7.3 TASK: Print A Menu</a>
<ul>
<li><a href="#sample-output">Sample Output</a></li>
</ul></li>
<li><a href="#f-string-formatting">7.4 F-String Formatting</a></li>
<li><a href="#task-improve-the-menu-script">7.5 TASK: Improve The Menu Script</a>
<ul>
<li><a href="#sample-output-1">Sample Output</a></li>
</ul></li>
<li><a href="#common-issues-with-dictionaries">7.6 Common Issues With Dictionaries</a>
<ul>
<li><a href="#handling-keyerrors">Handling KeyErrors</a></li>
</ul></li>
<li><a href="#iterating-dictionaries">7.7 Iterating Dictionaries</a>
<ul>
<li><a href="#what-is-a-tuple">What Is A Tuple?</a></li>
</ul></li>
<li><a href="#task-modifying-a-dictionary">7.8 TASK: Modifying A Dictionary</a>
<ul>
<li><a href="#sample-output-2">Sample Output</a></li>
<li><a href="#explanation-of-the-error">Explanation Of The Error</a></li>
</ul></li>
<li><a href="#csv-files">7.9 CSV Files</a>
<ul>
<li><a href="#reading-from-a-csv-file">Reading From A CSV File</a></li>
<li><a href="#writing-to-a-csv-file">Writing To A CSV File</a></li>
</ul></li>
<li><a href="#task-substitute-data-in-a-csv-file">7.10 TASK: Substitute Data In A CSV File</a></li>
<li><a href="#challenge-task-printing-a-table">CHALLENGE TASK: Printing a Table</a>
<ul>
<li><a href="#sample-output-3">Sample Output</a></li>
</ul></li>
<li><a href="#deliverables">Deliverables</a></li>
<li><a href="#glossary">Glossary</a></li>
</ul></li>
</ul>
</nav>
<h1 id="lab-7-dictionaries-and-csv-files-f-strings">Lab 7: Dictionaries and CSV Files, F-Strings</h1>
<h2 id="learning-outcomes">Learning Outcomes</h2>
<p>In this lab, you will learn:</p>
<ul>
<li>how to work with dictionaries,</li>
<li>how to align strings using f-strings,</li>
<li>how to read and write csv files.</li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In this lab we will be introducing some new datatypes, notably the <em>dictionary</em>. Different datatypes are suited to different use-cases, and have different performance characteristics as well (although for the scripts we are creating, performance is not really that much of an issue!). In addition, we will introduce a method of working with <em>Comma-Separated Value</em> files, otherwise known as <em>csv</em> files. CSV files store data in rows and columns similar to spreadsheets, but do not contain formulae. They can easily be imported into spreadsheet programs such as Microsoft Excel. Oftentimes we would like to use scripting to <em>parse</em> data and then export it to a CSV file.</p>
<p>Why not simply create <code>xls</code> or <code>xlsx</code> spreadsheets? These are proprietary formats, and working with them can cause formatting or compatibility issues. While there exist modules that will work with <code>xls(x)</code> files, we can bypass a lot of frustration by working with <em>open</em> formats whenever possible.</p>
<h2 id="dictionaries">7.1 Dictionaries</h2>
<h3 id="task-understanding-the-limitations-of-lists">TASK: Understanding the Limitations of Lists</h3>
<p>You have already been working with lists, which look like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>student1 <span class="op">=</span> [<span class="st">&#39;eric&#39;</span>, <span class="st">&#39;smith&#39;</span>, <span class="st">&#39;217 Au Large Blvd&#39;</span>, <span class="st">&#39;Toronto&#39;</span>, <span class="st">&#39;Ontario&#39;</span>, <span class="st">&#39;M4A 1P3&#39;</span>]</span></code></pre></div>
<p>A list is a collection of elements, grouped together under one variable name. In this example, you can see that <code>student1</code> appears to contain a name and mailing address.</p>
<p>Lists elements are accessible by identifying the name of the list and the <em>index number</em> of the element. Let’s explore this by creating a function that will create a shipping label string. Note that here we are using f-strings to structure our output.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">def</span> shipping_label(a_lst):</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="co">&quot;takes a list, generates a string&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>    a_str <span class="op">=</span> <span class="ss">f&quot;</span><span class="sc">{</span>a_lst[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>a_lst[<span class="dv">1</span>]<span class="sc">}</span><span class="ch">\n</span><span class="ss">&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>    a_str <span class="op">+=</span> <span class="ss">f&quot;</span><span class="sc">{</span>a_lst[<span class="dv">2</span>]<span class="sc">}</span><span class="ch">\n</span><span class="ss">&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    a_str <span class="op">+=</span> <span class="ss">f&quot;</span><span class="sc">{</span>a_lst[<span class="dv">3</span>]<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>a_lst[<span class="dv">4</span>]<span class="sc">}</span><span class="ch">\n</span><span class="ss">&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    a_str <span class="op">+=</span> <span class="ss">f&quot;</span><span class="sc">{</span>a_lst[<span class="dv">5</span>]<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>    <span class="cf">return</span> a_str</span></code></pre></div>
<p>Create a new Python script called <code>lab7a.py</code> and place both <code>student1</code> and the <code>shipping_label</code> function inside it. Make sure to <em>call</em> the function using <code>student1</code> as an argument, and use <code>print</code> with the return value. Your output should look like this:</p>
<pre><code>eric smith
217 Au Large Blvd
Toronto, Ontario
M4A 1P3</code></pre>
<p>This method has a lot of advantages: we are grouping data that needs to stay together. We don’t want <code>student1</code>’s address to get confused with <code>student2</code>’s, for example. But you might notice that the <code>shipping_label</code> function is hard to read. Why does the student’s first name come first in the list? Why is the Postal code contained in <code>a_lst[5]</code>? Let’s expand on this example and add some contact information:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>student1 <span class="op">=</span> [<span class="st">&#39;eric&#39;</span>, <span class="st">&#39;smith&#39;</span>, <span class="st">&#39;647-555-01234&#39;</span>, <span class="st">&#39;217 Au Large Blvd&#39;</span>, <span class="st">&#39;Toronto&#39;</span>, <span class="st">&#39;Ontario&#39;</span>, <span class="st">&#39;M4A 1P3&#39;</span>, <span class="st">&#39;esmith1@myseneca.ca&#39;</span>]</span></code></pre></div>
<p>Any programmer working on this program now has to remember that the telephone number is the <em>third</em> element, and the email address is the <em>eighth</em>. Why the third, and why the eighth? There’s no reason, in this case the order of elements in the list is completely arbitrary! Lists are excellent for storing a collection of data with a specific order, but in this case we would much rather identify each element by what they <em>contain</em>, rather than by the order in which appear.</p>
<h3 id="using-dictionaries-to-solve-the-problem-with-lists">Using Dictionaries To Solve The Problem With Lists</h3>
<p>Dictionaries are like lists, in that they are a group of elements. However, the individual elements are accessible using <em>keys</em> rather than index numbers.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> mydict <span class="op">=</span> {<span class="st">&#39;key&#39;</span>: <span class="st">&#39;value&#39;</span>}  <span class="co"># the curly braces indicate a dictionary when there are two elements with a : between them.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> mydict[<span class="st">&#39;key&#39;</span>]  <span class="co"># &#39;key&#39; is used instead of 0.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>value</span></code></pre></div>
<ul>
<li>Dictionaries are defined by using curly braces (<code>{}</code>). The key <em>must</em> come before a colon (<code>:</code>), and it <em>must</em> have a value next to it.</li>
<li>Keys are used as identifiers for the elements (or values) of a dictionary, just as index numbers are used with lists. Same as lists, the key will be enclosed in square brackets after the variable name.</li>
<li>Just like lists, values inside a dictionary can be strings, integers, floats, lists, and so on. However, there are a few restrictions for the datatype of the <em>key</em>. Keys must be <em>immutable</em>.</li>
<li>Immutable means they can’t change. Without going too deep into the topic, for now all you need to know is that keys can be strings, ints, or floats, but <em>can’t</em> be lists.</li>
</ul>
<h3 id="task-modify-lab7a">TASK: Modify <code>lab7a</code></h3>
<p>Modify <code>lab7a.py</code> so that <code>student1</code> is replaced with a dictionary:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>student1 <span class="op">=</span> {<span class="st">&#39;first_name&#39;</span>: <span class="st">&#39;eric&#39;</span>, <span class="st">&#39;last_name&#39;</span>:<span class="st">&#39;smith&#39;</span>, <span class="st">&#39;addr1&#39;</span>: <span class="st">&#39;217 Au Large Blvd&#39;</span>, <span class="st">&#39;city&#39;</span>: <span class="st">&#39;Toronto&#39;</span>, <span class="st">&#39;prov&#39;</span>: <span class="st">&#39;Ontario&#39;</span>, <span class="st">&#39;pcode&#39;</span>: <span class="st">&#39;M4A 1P3&#39;</span>}</span></code></pre></div>
<p>And now modify the function to use this dictionary instead of a list. Make sure that the format stays the same.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> <span class="im">from</span> lab7a <span class="im">import</span> student1, shipping_label</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> <span class="bu">print</span>(shipping_label(student1))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>Eric Smith</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="dv">217</span> Au Large Blvd</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>Toronto, Ontario</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a>M4A 1P3</span></code></pre></div>
<p>Make sure to research a way to get the name capitalized.</p>
<h2 id="modifying-dictionaries">7.2 Modifying Dictionaries</h2>
<p>Dictionaries contain <em>mutable</em> values and <em>immutable</em> keys. As stated before, <em>immutable</em> objects cannot be modified, only created or removed. <em>Mutable</em> objects are modifiable. That means we cannot change a key once it has been created, but we can change the value assigned to it.</p>
<p>Use the Python interpreter to follow these examples.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>meal_plan <span class="op">=</span> {<span class="st">&#39;breakfast&#39;</span>: <span class="st">&#39;oatmeal&#39;</span>, <span class="st">&#39;lunch&#39;</span>: <span class="st">&#39;sandwiches&#39;</span>, <span class="st">&#39;dinner&#39;</span>: <span class="st">&#39;broccoli&#39;</span>}</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>meal_plan[<span class="st">&#39;lunch&#39;</span>] <span class="op">=</span> <span class="st">&#39;ice cream&#39;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="bu">print</span>(meal_plan)</span></code></pre></div>
<p>New key/value pairs can be added using the same syntax:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a>meal_plan[<span class="st">&#39;snack&#39;</span>] <span class="op">=</span> <span class="st">&#39;cookies&#39;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="bu">print</span>(meal_plan)</span></code></pre></div>
<p>Removing key/value pairs from a dictionary is more complicated. We can use a method called <code>.pop()</code>, which will take a key as argument, return the value associated with the key, and remove that pair from the dictionary. Observe what happens when using this method with <code>meal_plan</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>value_removed <span class="op">=</span> meal_plan.pop(<span class="st">&#39;dinner&#39;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="bu">print</span>(meal_plan)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="bu">print</span>(value_removed)</span></code></pre></div>
<p>You will a <code>.pop()</code> method inside list objects as well. “Popping” is a concept in programming where we select an item for processing, handle it, and remove it from the original collection.</p>
<h2 id="task-print-a-menu">7.3 TASK: Print A Menu</h2>
<ul>
<li>Call this script <code>lab7b.py</code>.</li>
<li>Copy the <code>meal_plan</code> dictionary into this new file. Use either the original, or the modified version, it’s up to you.</li>
<li>Create a function called <code>print_meal_plan</code> that will print a menu that includes three meals. (omit the snack).</li>
<li><code>print_meal_plan</code> should accept a dictionary as an argument, but this time, your function shouldn’t return anything. It should instead have <code>print</code> statements inside.</li>
<li>You won’t submit this version of the file, but save it for now and make sure it works.</li>
</ul>
<h3 id="sample-output">Sample Output</h3>
<pre><code>MENU FOR TODAY
==============
Breakfast: oatmeal
Lunch: sandwiches
Dinner: broccoli</code></pre>
<h2 id="f-string-formatting">7.4 F-String Formatting</h2>
<p>You’ll notice that the formatting for our menu printing program isn’t very nice. Usually when we are creating menus, we would like titles to be centred, and columns to be justified to the left or right. Fortunately, things like this are easy to do with f-strings.</p>
<p>Open a new interpreter window. Let us start by defining a total width for our menu:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>width <span class="op">=</span> <span class="dv">40</span></span></code></pre></div>
<p>It will be easier to visualise this space if we print characters to fill up this space. Enter this code:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">&quot;=&quot;</span> <span class="op">*</span> width)</span></code></pre></div>
<p>What you should see printed is 40 equal signs. It’s a nice feature that we can use the <code>*</code> <em>multiply</em> a string!</p>
<p>Now we can demonstrate alignment using f-strings.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">: &lt;40}</span><span class="ss">&quot;</span>)  <span class="co"># Notice that &quot; is on the outside, and &#39; is on the inside.</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">: ^40}</span><span class="ss">&quot;</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">: &gt;40}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<p>What you should see now are three lines with <code>x</code>, with the x justified to the left, to the centre, and to the right.</p>
<p>This code, however, has a weakness: what if we decide that our ‘width’ should be 50 instead of 40? Right now we have hardcoded that width inside our f-strings. Fortunately we can use variables to specify width, but we need to contain it inside curly braces.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">:</span> <span class="op">&lt;</span>{width}<span class="sc">}</span><span class="ss">&quot;</span>)  <span class="co"># Notice there is not space between &lt; and {width}.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">:</span> <span class="op">^</span>{width}<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">:</span> <span class="op">&gt;</span>{width}<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<p>We can combine things to create columns. I’m going to use hardcoded widths again to make things easier to see.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="bu">print</span>(<span class="ss">f&quot;|</span><span class="sc">{</span><span class="st">&#39;x&#39;</span> <span class="sc">: &lt;20}</span><span class="ss">|</span><span class="sc">{</span><span class="st">&#39;y&#39;</span> <span class="sc">: &gt;20}</span><span class="ss">|&quot;</span>)</span></code></pre></div>
<h2 id="task-improve-the-menu-script">7.5 TASK: Improve The Menu Script</h2>
<ul>
<li>Modify your <code>lab7b.py</code> file. It’s not necessary to submit the old version, just this new version.</li>
<li>Use f-strings to format the output correctly. The total width should be 50. Use a multiplication operator to create the horizontal line between the title and meals. Match the sample output exactly.</li>
</ul>
<h3 id="sample-output-1">Sample Output</h3>
<pre><code>                  MENU FOR TODAY                  
==================================================
Breakfast                                  oatmeal
Lunch                                   sandwiches
Dinner                                    broccoli</code></pre>
<h2 id="common-issues-with-dictionaries">7.6 Common Issues With Dictionaries</h2>
<h3 id="handling-keyerrors">Handling KeyErrors</h3>
<p>There is one issue that arises when working with a dictionary that has been modified. What if we try to get the value of a key that doesn’t exist? Refer back to the interpreter and your <code>meal_plan</code> example to simulate this. Someone has removed the ‘snack’ key, now what happens when we try to access it?</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> <span class="bu">print</span>(meal_plan[<span class="st">&#39;snack&#39;</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a><span class="pp">KeyError</span>: <span class="st">&#39;snack&#39;</span></span></code></pre></div>
<p>We have already learned about using exception handling to deal with issues such as these. However it can be tedious to put every instance of this in a try/except block. As an alternative, you can use the method <code>.get()</code>. This has the added feature of allowing us to substitute any missing value with a default of our choosing.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> meal_plan.get(<span class="st">&#39;dinner&#39;</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>broccoli</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> meal_plan.get(<span class="st">&#39;snack&#39;</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a><span class="va">None</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> meal_plan.get(<span class="st">&#39;snack&#39;</span>, <span class="st">&#39;fruit&#39;</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>fruit</span></code></pre></div>
<p>This second argument is useful, it contains a <em>default value</em> of <code>None</code>, but we can override that default value with one of our own. Use <code>help(meal_plan)</code> and look at some of the other methods available; you will no doubt see more examples of these arguments with defaults already set.</p>
<h2 id="iterating-dictionaries">7.7 Iterating Dictionaries</h2>
<p>You can use a for loop to iterate through a dictionary. The only difference being, by default the <em>looping variable</em> will contain the key for each key/value pair found. Also you will note that dictionaries don’t have an <em>order</em>. You have no guarantee about which key will appear first during the iteration.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> mydict <span class="op">=</span> {<span class="st">&#39;brand&#39;</span>: <span class="st">&#39;subaru&#39;</span>, <span class="st">&#39;model&#39;</span>: <span class="st">&#39;impreza&#39;</span>, <span class="st">&#39;color&#39;</span>: <span class="st">&#39;green&#39;</span>, <span class="st">&#39;year&#39;</span>: <span class="st">&#39;2017&#39;</span>}</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> <span class="cf">for</span> key <span class="kw">in</span> mydict:</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span>    <span class="bu">print</span>(key)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>brand</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a>color</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a>model</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a>year</span></code></pre></div>
<p>There are other ways of iterating through a dictionary, which may be more useful depending on what you’re doing. By using the methods <code>.keys()</code> and <code>.values()</code> you can generate a <em>list</em> of either keys or values respectively.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> mydict.keys()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>[<span class="st">&#39;brand&#39;</span>, <span class="st">&#39;model&#39;</span>, <span class="st">&#39;color&#39;</span>, <span class="st">&#39;year&#39;</span>]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;&gt;</span> mydict.values()</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a>[<span class="st">&#39;subaru&#39;</span>, <span class="st">&#39;impreza&#39;</span>, <span class="st">&#39;green&#39;</span>, <span class="st">&#39;2017&#39;</span>]</span></code></pre></div>
<p>Finally, by using the method <code>.items()</code> you can generate a <em>tuple</em> which contains both.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a><span class="cf">for</span> k, v <span class="kw">in</span> mydict.items():</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a>    <span class="bu">print</span>{<span class="ss">f&quot;Key is: </span><span class="sc">{k}</span><span class="ss"> and value is: </span><span class="sc">{v}</span><span class="ss">.&quot;</span>)</span></code></pre></div>
<h3 id="what-is-a-tuple">What Is A Tuple?</h3>
<p>Remember how we said that dictionary keys must be immutable, and therefore we cannot use a list as a key? A <em>tuple</em> is yet another datatype in Python. It is very similar to a list in almost every way, except that it is immutable. This means that you cannot <code>append()</code> or <code>remove()</code> an element from a tuple, you can only create or delete the entire tuple.</p>
<p>Tuples have different syntax as well.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a>tuple_with_one_element <span class="op">=</span> (<span class="st">&#39;hello&#39;</span>, )  <span class="co"># notice the comma. This is only needed for tuples with one thing in them.</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a>tuple_with_more <span class="op">=</span> (<span class="st">&#39;hello&#39;</span>, <span class="st">&#39;world&#39;</span>, <span class="st">&#39;!&#39;</span>)</span></code></pre></div>
<p>Why use a tuple? There is a small difference in performance when working with a tuple versus a list: a tuple is much faster in a lot of cases. And you can use a tuple as a dictionary key, as it is immutable. As you learn about more modules in the Python standard library, you will no doubt encounter functions that return tuples rather than lists, and so it’s worth noting their existence here.</p>
<h2 id="task-modifying-a-dictionary">7.8 TASK: Modifying A Dictionary</h2>
<p>For this task we are going to create a list of meal plans for a Summer Camp. For each day of camp, we will be using an empty template dictionary with keys for breakfast, lunch, and dinner. When we add a day we will modify the values for each dictionary key, and add the dictionary into a list. This will also help us to illustrate another important programming concept.</p>
<ul>
<li>Create a new file called <code>lab7c.py</code>.</li>
<li>Inside of this file, we want to create a dictionary called <code>template</code>. This <code>template</code> should have keys called <code>'breakfast'</code>, <code>'lunch'</code>, and <code>'dinner'</code>, and the value for each should be <code>None</code>.</li>
<li>Create a <strong>main block</strong> in your script. Inside the main block, create a loop that will ask <code>Would you like to add a day? (y/n)</code>. If the user enters <code>y</code>, create a new dictionary from the template. For example: <code>new_day = template</code>.</li>
<li>Your script should now <em>iterate through each key in your <code>new_day</code> dictionary</em>, and ask the user to enter a meal idea for each. Use one of the iterating methods we have discussed.</li>
<li>Append <code>new_day</code> to a list of days called <code>days</code>.</li>
<li>Once the user has stopped adding new days, ask them to enter a number. The number should be between 1 and the total number of days in your list. For example: <code>Please enter a day number for the menu you would like to print (1-3):</code>.</li>
<li>If the number is out of range of the list, print an error message and exit.</li>
<li>If the number is within range, use the function you created in <code>lab7b.py</code> to print that day’s menu. Use <code>import</code> to do this.</li>
</ul>
<h3 id="sample-output-2">Sample Output</h3>
<pre><code>Would you like to add a day? (y/n) y
Please enter what you would like to eat for breakfast:eggs
Please enter what you would like to eat for lunch:tuna
Please enter what you would like to eat for dinner:pizza
Would you like to add a day? (y/n) y
Please enter what you would like to eat for breakfast:hot dogs
Please enter what you would like to eat for lunch:veal
Please enter what you would like to eat for dinner:pasta
Would you like to add a day? (y/n) n
Please enter a day number for the menu you would like to print (1-2): 1
                  MENU FOR TODAY                  
==================================================
Breakfast                                 hot dogs
Lunch                                         veal
Dinner                                       pasta</code></pre>
<h3 id="explanation-of-the-error">Explanation Of The Error</h3>
<p>You might have noticed that the output is wrong! We are asking to print the first day’s menu (eggs, tuna, and pizza) but it is printing the last day’s meals.</p>
<ul>
<li>Use the debugger to watch what happens as you enter meals. What is happening?</li>
<li>The reason that we are seeing the template change as well as each dictionary in the list, is that we aren’t actually creating copies of the template. The code <code>new_day = template</code> is creating a <em>reference</em> to <code>template</code>.</li>
<li>What is a reference? It means that we have created one dictionary, and we are storing it in memory. Python doesn’t want to use more memory than it needs to, so by default a reference will <em>point to</em> the original dictionary rather than duplicate it into a address. In other words, <code>new_meal</code> is just an alias for <code>template</code>, and appending it into our days list is just creating another alias. <strong>There is only one dictionary in our entire program!</strong></li>
<li>In order for this program to work the way we want it to, we will need to <em>explicitly</em> create a copy of <code>template</code> each time we run our program. Replace the <code>new_meal = template</code> line with the following: <code>new_meal = template.copy()</code>.</li>
<li>Run this code again using the debugger. This time, you shouldn’t see the <code>template</code> dictionary change, and each item in your <code>days</code> list will have unique meals.</li>
<li>Save <code>lab7c.py</code> and submit it as part of your lab.</li>
</ul>
<hr />
<p><strong>NOTE:</strong> <code>.copy()</code> creates what is known as a <em>shallow copy</em>. There also exists (in the <code>copy</code> module) a function called <code>deepcopy()</code>. These concepts become more important when the object we are copying contain more objects inside it, but this is outside the scope of our course. If you would like to learn more, refer to <a href="https://stackoverflow.com/questions/2465921/how-to-copy-a-dictionary-and-only-edit-the-copy/2465951#2465951">this discussion</a> on StackOverflow.</p>
<hr />
<h2 id="csv-files">7.9 CSV Files</h2>
<p>CSV files are used to store tables. They don’t contain formula information like spreadsheets, but can easily be imported into a spreadsheet program.</p>
<p>A typical CSV file will have columns and rows. Data is store between double-quotes, and a comma (<code>,</code>) will define the boundary between columns. A newline character (<code>\n</code>) will define the boundary between rows. For example:</p>
<pre><code>&quot;First Name&quot;,&quot;Last Name&quot;,&quot;Student Number&quot;,&quot;GPA&quot;
&quot;Eric&quot;,&quot;Smith&quot;,&quot;0123&quot;,&quot;2.0&quot;
&quot;Bart&quot;,&quot;Simpson&quot;,&quot;0567&quot;,&quot;4.0&quot;
&quot;Sung-won&quot;,&quot;Kim&quot;,&quot;0489&quot;,&quot;3.8&quot;</code></pre>
<p><strong>Note:</strong> You can download <a href="https://ict.senecacollege.ca/~eric.brauer/prg600/labs/sample.csv">sample.csv</a> from our site.</p>
<h3 id="reading-from-a-csv-file">Reading From A CSV File</h3>
<p>Python has a module called <code>csv</code> which will allow us to work with a CSV file very easily. You can refer to the <a href="https://docs.python.org/3/library/csv.html">documentation</a> to learn more about this module. Since we’ve learned about using dictionaries, it will be easiest to use <code>DictReader</code> to import the data as a <em>list</em> of <em>dictionaries</em>.</p>
<p>To open a csv file, you will need to create a file object, same as you learned in the last lab. It’s always good practice to add exception handling, and to close the file afterward.</p>
<p>Once that is done, you can use <code>DictReader</code> with the file object as an argument.</p>
<ul>
<li>Create <code>sample.csv</code> using the example above.</li>
<li>Create <code>lab7d.py</code> and copy the following into it:</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="im">import</span> csv</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a>list_of_dicts <span class="op">=</span> []</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;sample.csv&#39;</span>, <span class="st">&#39;r&#39;</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a>reader <span class="op">=</span> csv.DictReader(f)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true"></a><span class="cf">for</span> row <span class="kw">in</span> reader:</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true"></a>    list_of_dicts.append(row)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true"></a>f.close()</span></code></pre></div>
<ul>
<li>Open <code>lab7d.py</code> in VSCode. Use the debugger to step through the code, and to look at <code>list_of_dicts</code> once it was been created.</li>
<li>You should see a list of dictionaries, with common keys taken from the first line of the CSV file.</li>
<li>The sample output below has one dictionary on each new line, how would you do this using Python code?</li>
</ul>
<pre><code>{&#39;First Name&#39;: &#39;Eric&#39;, &#39;Last Name&#39;: &#39;Smith&#39;, &#39;Student Number&#39;: &#39;0123&#39;, &#39;GPA&#39;: &#39;2.0&#39;}
{&#39;First Name&#39;: &#39;Bart&#39;, &#39;Last Name&#39;: &#39;Simpson&#39;, &#39;Student Number&#39;: &#39;0567&#39;, &#39;GPA&#39;: &#39;4.0&#39;}
{&#39;First Name&#39;: &#39;Sung-won&#39;, &#39;Last Name&#39;: &#39;Kim&#39;, &#39;Student Number&#39;: &#39;0489&#39;, &#39;GPA&#39;: &#39;3.8&#39;}</code></pre>
<h3 id="writing-to-a-csv-file">Writing To A CSV File</h3>
<p>To perform the inverse operation, you might expect the <code>csv</code> module to have a <code>DictWriter</code> method. And you would be correct.</p>
<p>One difference between reading and writing, is that the header (containing column names such as ‘First Name’) aren’t written by default, so we will need to perform the operation manually.</p>
<p>We create a list called <code>fieldnames</code>, and we use the <code>.keys()</code> method only on the <em>first</em> dictionary to get the fieldnames to use in our CSV file. Then we can use <code>w.writeheader()</code> to write this list as our first row in the file. Then a simple for loop can be used to convert each dictionary into a new row.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;sample2.csv&#39;</span>, <span class="st">&#39;w&#39;</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a>fieldnames <span class="op">=</span> list_of_dicts[<span class="dv">0</span>].keys()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true"></a>w <span class="op">=</span> csv.DictWriter(f, fieldnames<span class="op">=</span>fieldnames)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true"></a>w.writeheader()</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true"></a><span class="cf">for</span> row <span class="kw">in</span> list_of_dicts:</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true"></a>    w.writerow(row)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true"></a>f.close()</span></code></pre></div>
<h2 id="task-substitute-data-in-a-csv-file">7.10 TASK: Substitute Data In A CSV File</h2>
<ul>
<li>Modify <code>lab7d.py</code> to perform this task.</li>
<li>Put both the <code>DictReader</code> and <code>DictWriter</code> code into functions. The filename should be the first argument for each function. The reader function should return a list of dictionaries, and the writer function should take a list of dictionaries as its second argument.</li>
<li>Your script should call the reader function, and return the list of dictionaries. Then, it should perform a <em>substitution</em> on each row of the list of dictionaries:
<ul>
<li>If ‘First Name’ is Christopher, change it to Chris.</li>
<li>If ‘Last Name’ is Patal, change it to Patel.</li>
<li>If ‘Last Name’ is Smith, change it to Nichols.</li>
<li>If ‘Address’ is 81 Vanier, change it to 72 Princeton.</li>
<li>If ‘Last Name’ is Geary, change <em>‘Address’</em> to 455 Bloor.</li>
<li>If ‘City’ is North York, change it to Toronto.</li>
<li>If ‘Country’ is Canada, change it to CA. Warning: you will need to handle the case where a csv file may not contain this key!</li>
</ul></li>
<li>Your code should then save overwrite the file contents of the filename given. Your script should use a command line argument from the user to set the filename.</li>
<li>Test with both of these files: <a href="https://ict.senecacollege.ca/~eric.brauer/prg600/labs/test1.csv">test1.csv</a> and <a href="https://ict.senecacollege.ca/~eric.brauer/prg600/labs/test2.csv">test2.csv</a>.</li>
<li>Submit your script as part of your lab submission.</li>
</ul>
<h2 id="challenge-task-printing-a-table">CHALLENGE TASK: Printing a Table</h2>
<ul>
<li>Copy <code>lab7d.py</code> and rename the copy <code>challenge7.py</code>.</li>
<li>Add a new function that will print the modified table.</li>
<li>Use keys for column titles.</li>
<li>Use f-strings to format the output in such a way that the contents are easy to read.</li>
</ul>
<h3 id="sample-output-3">Sample Output</h3>
<pre><code>First Name | Last Name | GPA
----------------------------
Bart       | Simpson   | 4.0
...</code></pre>
<h2 id="deliverables">Deliverables</h2>
<p>You can <a href="https://ict.senecacollege.ca/~eric.brauer/prg600/labs/check/check-lab7.py">download the check script here</a>.</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />
lab7a.py</li>
<li><input type="checkbox" disabled="" />
lab7b.py</li>
<li><input type="checkbox" disabled="" />
lab7c.py</li>
<li><input type="checkbox" disabled="" />
lab7d.py</li>
<li><input type="checkbox" disabled="" />
challenge7.py</li>
<li><input type="checkbox" disabled="" />
lab7-check-output.txt</li>
</ul>
<h2 id="glossary">Glossary</h2>
<ul>
<li>key</li>
<li>value</li>
<li>mutable</li>
<li>immutable</li>
<li>tuple</li>
<li>reference</li>
</ul>
</body>
</html>
